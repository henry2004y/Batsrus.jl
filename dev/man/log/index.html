<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Log · Batsrus.jl</title><meta name="title" content="Log · Batsrus.jl"/><meta property="og:title" content="Log · Batsrus.jl"/><meta property="twitter:title" content="Log · Batsrus.jl"/><meta name="description" content="Documentation for Batsrus.jl."/><meta property="og:description" content="Documentation for Batsrus.jl."/><meta property="twitter:description" content="Documentation for Batsrus.jl."/><meta property="og:url" content="https://henry2004y.github.io/Batsrus.jl/man/log/"/><meta property="twitter:url" content="https://henry2004y.github.io/Batsrus.jl/man/log/"/><link rel="canonical" href="https://henry2004y.github.io/Batsrus.jl/man/log/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../democards/nocoverlisttheme.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../manual/">Manual</a></li><li><a class="tocitem" href="../../examples/">Examples</a></li><li><a class="tocitem" href="../internal/">Internal</a></li><li class="is-active"><a class="tocitem" href>Log</a><ul class="internal"><li><a class="tocitem" href="#Test-Data"><span>Test Data</span></a></li><li><a class="tocitem" href="#VTK-AMR-Grid-Structure"><span>VTK AMR Grid Structure</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Log</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Log</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/henry2004y/Batsrus.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/henry2004y/Batsrus.jl/blob/master/docs/src/man/log.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Development-Log"><a class="docs-heading-anchor" href="#Development-Log">Development Log</a><a id="Development-Log-1"></a><a class="docs-heading-anchor-permalink" href="#Development-Log" title="Permalink"></a></h1><p>All the workflows here is not restricted to one type of model output. After being familiar with new ideas and new models, one can easily make use of existing samples and create reader of their own. Because of the embarrassing parallelism nature of postprocessing, it is quite easy to take advantage of parallel approaches to process the data.</p><p>For the plotting, streamline tracing and particle tracing, a common problem is the grid and related interpolation process. Now I have <a href="https://github.com/henry2004y/FieldTracer.jl">FieldTracer.jl</a> and <a href="https://github.com/henry2004y/TestParticle.jl">TestParticle.jl</a> designed specifically for these tasks.</p><h2 id="Test-Data"><a class="docs-heading-anchor" href="#Test-Data">Test Data</a><a id="Test-Data-1"></a><a class="docs-heading-anchor-permalink" href="#Test-Data" title="Permalink"></a></h2><p>If you don&#39;t have SWMF data at hand, Batsrus.jl provides some test data for you to begin with.</p><pre><code class="language-julia hljs">using LazyArtifacts

datapath = artifact&quot;testdata&quot; # where you can find multiple test data files</code></pre><p>These are also used in the standard test. These will be automatically downloaded from <a href="https://github.com/henry2004y/batsrus_data">batsrus_data</a> if you run the package test locally.</p><h2 id="VTK-AMR-Grid-Structure"><a class="docs-heading-anchor" href="#VTK-AMR-Grid-Structure">VTK AMR Grid Structure</a><a id="VTK-AMR-Grid-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#VTK-AMR-Grid-Structure" title="Permalink"></a></h2><p><code>vtkOverlappingAMR</code> implements a somewhat strict Berger-Collela AMR scheme:</p><ol><li>All grids are Cartesian.</li><li>Grids at the same level do not overlap.</li><li>The refinement ratios, RL, between adjacent levels are integer (typically 2 or 4) and uniform within the same level.</li><li>Grid cells are never partially refined; i.e., each cell is refined to four quads in 2D or eight hexahedra in 3D.</li></ol><p>Or in other words,</p><ul><li>Refinement ratio across levels is constant.</li><li>Each block at levels &gt; 0 need to be covered 100% by one parent block of</li></ul><p>previous level.</p><ul><li>Some other restriction about what happens at the boundary.</li></ul><p>You can directly use <code>vtkUniformGridAMR</code>, which does not impose any restrictions. Most filters should work for this class - there just wouldn&#39;t be any specialized filters such as the dual-grid contour / clip ones for the <code>vtkOverlappingAMR</code>.</p><p>The <code>vtkAMRInformation</code> documentation consists only of</p><ul><li>Refinement ratio between AMR levels</li><li>Grid spacing for each level</li><li>The file block index for each block parent child information, if requested</li></ul><p><img src="../../images/sample_2DAMR.jpg" alt="sample_2DAMR"/> Sample 2D AMR Dataset with two levels and refinement ratio, RL=4. The root level (L0) consists of a single grid shown in black wireframe while the next level (L1) consists of two grids, depicted in green wireframe and red wireframe respectively. The two grids at L1 are projected from the root level to illustrate that the cells underneath are “hidden.”</p><p>In VTK, the collection of AMR grids is stored in a <code>vtkHierarchicalBoxDataSet</code> data-structure. Each grid, G(Li,k), is represented by a <code>vtkUniformGrid</code> data structure where the unique key pair (Li,k) denotes the corresponding level (Li) and the grid index within the level (k) with respect to the underlying hierarchical structure. An array historically known as <code>IBLANK</code>, stored as a cell attribute in <code>vtkUniformGrid</code>, denotes whether a cell is hidden or not. The blanking array is subsequently used by the mapper to hide lower resolution cells accordingly when visualizing the dataset.</p><p>To enable the execution of data queries without loading the entire dataset in memory, metadata information is employed. The metadata stores a minimal set of geometric information for each grid in the AMR hierarchy. Specifically, the AMR metadata, B(Li,k), corresponding to the grid G(Li,k), is represented using a <code>vtkAMRBox</code> object and it consists of the following information:</p><ol><li>N={Nx, Ny, Nz} — the cell dimensions of the grid (since the data is cell-centered)</li><li>The grid spacing at level L, hL={hx,hy,hz}</li><li>The grid level Li and grid index k</li><li>The global dataset origin, X=(X0, Y0, Z0), i.e., the minimum origin from all grids in level L0</li><li>The LoCorner and HiCorner, which describe the low and high corners of the rectangular region covered by the corresponding grid in a virtual integer lattice with the same spacing (h) that covers the entire domain.</li></ol><p><img src="../../images/sample_AMRmetadata.png" alt="sample_2DAMR"/></p><p>Given the metadata information stored in the AMR box of each grid, the refinement ratio at each level can be easily computed using relationship (1) from Table 1. Further, the cartesian bounds the corresponding grid covers and the number of points and cells is also available (see relationships 2-4 in Table 1). Notably, geometric queries such as determining which cell contains a given point, or if a grid intersects a user-supplied slice plane, can be answered using just the metadata.</p><p>There is a <code>vtkAMRDualExtractionFilter</code>, which constructs a dual-mesh (i.e., the mesh constructed by connecting the cell-centers) over the computational domain. If we can directly tell ParaView that the mesh we have is a dual-mesh, then the initial trial with multi-block data may work directly.</p><p><code>AMRGaussianPulseSource</code></p><p>See <a href="https://www.paraview.org/ParaView/index.php/Multi-Resolution_Rendering_with_Overlapping_AMR">Multi-Resolution Rendering with Overlapping AMR</a> for the implementation of C++ reader in VTK.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../internal/">« Internal</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.8.0 on <span class="colophon-date" title="Monday 16 December 2024 00:53">Monday 16 December 2024</span>. Using Julia version 1.11.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
